$(document).ready(function(){const r=$("#image-grid").isotope({itemSelector:".grid-item",percentPosition:!0,masonry:{columnWidth:".grid-item"}});let o=2;const t=ThemeConfig.blog_url;var e=document.querySelector(".joe_loading");function n(){var e=document.querySelectorAll(".grid-item");const t=new IntersectionObserver(function(e,o){e.forEach(function(e){var t;e.isIntersecting&&(t=e.target.querySelector(".lazy-load"))&&(t.src=t.dataset.src,t.classList.remove("lazy-load"),o.unobserve(e.target),r.isotope("layout"))})},{threshold:.5});e.forEach(function(e){t.observe(e)})}n();new IntersectionObserver(e=>{e[0].isIntersecting&&!async function(){var e=t+"/photos/page/"+o;fetch(e).then(e=>e.text()).then(e=>{var e=(new DOMParser).parseFromString(e,"text/html"),t=e.querySelectorAll(".grid-item");$(e).find("#image-grid").attr("data-next")<o?document.querySelector(".joe_loading").remove():0<t.length&&(t.forEach(e=>{r.append(e).isotope("appended",e)}),r.isotope("layout"),n(),o++)}).catch(e=>{console.error("Error fetching next page data:",e)})}()},{threshold:1}).observe(e),$(".joe_photos__filter li").on("click",function(){const t=$(this).attr("data-sjslink");$(this).addClass("active").siblings().removeClass("active"),r.isotope({filter:function(){var e=$(this).attr("data-sjsel");return"*"===t||e===t}})})});